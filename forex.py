__author__ = 'leshiy'
#-*- coding: utf-8 -*-

import urllib
import sys
from lxml import etree
import re

class WebService:
    def PlaceSingleOrder(self,UserID,PWD,Pair,Expiry,BuySell,Amount,Rate,OrderBasis):
        print "PlaceSingleOrder"

    def GetRatesDataSet(self,key):
        dataset=[]
        try:
            u = urllib.urlopen('http://api.efxnow.com/DEMOWebServices2.8/Service.asmx/GetRatesDataSet?Key='+key)
            root = etree.XML(u.read())
            rates=root.findall(".//Rates")


            for rate in rates:
                quote={"Quote":rate.find("Quote").text,"Display":rate.find("Display").text,"UpdateTime":rate.find("UpdateTime").text}
                dataset.append(quote)

            return dataset

        except :
            print "ошибка"
            return 0

    
        
    def GetRatesServerAuth(self,UserID,PWD,Brand):
        u = urllib.urlopen('http://api.efxnow.com/DEMOWebServices2.8/Service.asmx/GetRatesServerAuth?UserID='+UserID+'&PWD='+PWD+'&Brand='+Brand)
        root = etree.XML(u.read())
        return root.text

    def GetRatesBlotter(self,key):
        #u = urllib.urlopen('http://api.efxnow.com/DEMOWebServices2.8/Service.asmx/GetRatesBlotter?Key='+key)
        #root = etree.XML(u.read())
        #str=root.text
        str=r'EUR/CHF\1.26373\1.26404\D\1.26493\1.25751\5\A\1.25920\USD/CHF\05/13/2011 05:52:28$USD/PLN\2.73735\2.73813\D\2.76458\2.72925\5\E\2.74345\USD/PLN\05/13/2011 05:52:25$USD/ZAR\6.91480\6.91950\D\6.92900\6.88040\5\E\6.89400\USD/ZAR\05/13/2011 05:52:26$GBP/NZD\2.04742\2.04865\D\2.05506\2.04312\5\A\2.04710\NZD/USD\05/13/2011 05:52:28$USD/HKD\7.77100\7.77143\D\7.77369\7.77013\5\E\7.77142\USD/HKD\05/13/2011 05:51:40$ZAR/JPY\11.630\11.668\D\11.780\11.595\3\A\11.714\USD/JPY\05/13/2011 05:52:23$AUD/CAD\1.02870\1.02910\D\1.03017\1.02480\5\A\1.02774\USD/CAD\05/13/2011 05:52:26$EUR/SEK\8.97825\8.98098\D\8.99463\8.96245\5\A\8.96895\USD/SEK\05/13/2011 05:52:27$USD/CAD\0.96284\0.96313\D\0.96582\0.96035\5\E\0.96253\USD/CAD\05/13/2011 05:52:25$CAD/JPY\83.651\83.697\D\84.287\83.379\3\A\84.040\USD/JPY\05/13/2011 05:52:28$SGD/JPY\64.961\64.999\D\65.483\64.740\3\A\65.330\USD/JPY\05/13/2011 05:52:28$EUR/CAD\1.37648\1.37708\D\1.37867\1.36859\5\A\1.37120\USD/CAD\05/13/2011 05:52:27$USD/TRY\1.58061\1.58099\D\1.58249\1.57435\5\E\1.57705\USD/TRY\05/13/2011 05:52:17$EUR/GBP\0.87905\0.87935\D\0.88014\0.87311\5\A\0.87430\GBP/USD\05/13/2011 05:52:28$GBP/USD\1.62599\1.62625\D\1.63101\1.62378\5\A\1.62889\GBP/USD\05/13/2011 05:52:28$USD/CZK\17.0585\17.0643\D\17.1583\16.9865\4\E\17.0615\USD/CZK\05/13/2011 05:52:28$EUR/HUF\266.509\266.593\D\267.383\266.195\3\A\266.320\USD/HUF\05/13/2011 05:49:13$CHF/JPY\91.135\91.170\D\91.713\90.789\3\A\91.543\USD/JPY\05/13/2011 05:52:28$NZD/CAD\0.76428\0.76496\D\0.76684\0.76225\5\A\0.76555\USD/CAD\05/13/2011 05:52:24$USD/MXN\11.62300\11.62950\D\11.65880\11.61005\5\E\11.62290\USD/MXN\05/13/2011 05:52:24$EUR/USD\1.42957\1.42975\D\1.43405\1.41836\5\A\1.42453\EUR/USD\05/13/2011 05:52:26$AUD/USD\1.06827\1.06852\D\1.07178\1.06174\5\A\1.06764\AUD/USD\05/13/2011 05:52:27$AUD/JPY\86.073\86.109\D\86.512\85.565\3\A\86.407\USD/JPY\05/13/2011 05:52:28$USD/JPY\80.570\80.590\D\81.100\80.333\3\E\80.931\USD/JPY\05/13/2011 05:52:28$EUR/PLN\3.91370\3.91478\D\3.92188\3.90745\5\A\3.90845\USD/PLN\05/13/2011 05:52:22$GBP/CHF\1.43725\1.43778\D\1.44306\1.43400\5\A\1.44000\USD/CHF\05/13/2011 05:52:26$GBP/JPY\131.013\131.055\D\132.065\130.635\3\A\131.840\USD/JPY\05/13/2011 05:52:28$EUR/CZK\24.3885\24.3953\D\24.3981\24.2935\4\A\24.3055\USD/CZK\05/13/2011 05:52:24$XAU/AUD\1415.82\1416.58\D\1417.78\1409.92\2\A\1409.97\AUD/USD\05/13/2011 05:52:27$USD/SEK\6.27975\6.28213\D\6.32936\6.25915\5\E\6.29515\USD/SEK\05/13/2011 05:52:28$XAG/USD\35.885\35.965\D\36.220\34.134\3\A\34.661\XAG/USD\05/13/2011 05:52:28$GBP/AUD\1.52171\1.52227\D\1.53028\1.52060\5\A\1.52521\AUD/USD\05/13/2011 05:52:27$USD/SGD\1.23980\1.24031\D\1.24442\1.23776\5\E\1.23816\USD/SGD\05/13/2011 05:52:22$AUD/CHF\0.94426\0.94471\D\0.94753\0.94125\5\A\0.94365\USD/CHF\05/13/2011 05:52:27$XAU/USD\1512.83\1513.38\D\1516.98\1500.90\2\A\1505.70\XAU/USD\05/13/2011 05:52:27$NZD/CHF\0.70164\0.70217\D\0.70571\0.69853\5\A\0.70298\USD/CHF\05/13/2011 05:52:28$USD/DKK\5.21462\5.21538\D\5.25744\5.19930\5\E\5.23323\USD/DKK\05/13/2011 05:52:28$USD/CHF\0.88390\0.88411\D\0.88782\0.87969\5\E\0.88393\USD/CHF\05/13/2011 05:52:26$NZD/JPY\63.956\64.003\D\64.475\63.773\3\A\64.366\USD/JPY\05/13/2011 05:52:28$EUR/JPY\115.189\115.219\D\115.555\114.316\3\A\115.300\USD/JPY\05/13/2011 05:52:28$USD/HUF\186.385\186.483\D\187.973\186.005\3\E\186.915\USD/HUF\05/13/2011 05:52:25$EUR/AUD\1.33787\1.33838\D\1.33912\1.33310\5\A\1.33380\AUD/USD\05/13/2011 05:52:27$XAU/EUR\1058.02\1058.68\D\1061.11\1055.80\2\A\1056.75\EUR/USD\05/13/2011 05:52:27$NZD/USD\0.79382\0.79414\D\0.79669\0.79171\5\A\0.79534\NZD/USD\05/13/2011 05:52:28$EUR/DKK\7.45554\7.45590\D\7.45760\7.45549\5\A\7.45592\USD/DKK\05/13/2011 05:47:57$EUR/TRY\2.26005\2.26033\D\2.26454\2.23775\5\A\2.24805\USD/TRY\05/13/2011 05:52:26$CAD/CHF\0.91774\0.91819\D\0.92139\0.91493\5\A\0.91794\USD/CHF\05/13/2011 05:52:26$XAU/CHF\1337.32\1338.08\D\1339.18\1329.67\2\A\1330.97\USD/CHF\05/13/2011 05:52:27$AUD/NZD\1.34527\1.34597\D\1.34928\1.33961\5\A\1.34160\NZD/USD\05/13/2011 05:52:28$EUR/NZD\1.80027\1.80099\D\1.80511\1.78788\5\A\1.79038\NZD/USD\05/13/2011 05:52:28$GBP/CAD\1.56564\1.56628\D\1.56948\1.56320\5\A\1.56800\USD/CAD\05/13/2011 05:52:25$EUR/NOK\7.84225\7.84465\D\7.86683\7.82705\5\A\7.84045\USD/NOK\05/13/2011 05:52:28$USD/NOK\5.48574\5.48782\D\5.53583\5.46251\5\E\5.50305\USD/NOK\05/13/2011 05:52:28$XAU/GBP\930.15\930.81\D\931.21\923.15\2\A\924.05\GBP/USD\05/13/2011 05:52:27$'
        print str



